# File Malware Scanner

{% swagger expanded="true" fullWidth="true" method="put" path="/v1/file" baseUrl="https://your-malware-scanner-domain.com/malware-scanner" summary="API to be implemented by the customer." %}
{% swagger-description %}
Symproxy uses this API to submit the attachment for malware scanning.

Malware Scanner implementation should initiate the malware scanning of the attachment after receiving the file successfully.

:information\_source:
• It is highly recommended that the API call does not enforce the malware-scanning operation synchronously. Instead, queue the request to some internal queue and return the response back, unblocking the client (Symproxy).
• The service should be idempotent. There could be multiple submissions for the same file.

:construction:
When invoking the `malware-scanner/v1/file` endpoint on the scanner, symproxy will wait a maximum of 10 seconds for a response from the scanner. If it does not get a response in 10 seconds, it will retry.
It will try three times to invoke the `malware-scanner/v1/file` endpoint on the scanner if each previous attempt is unsuccessful.
{% endswagger-description %}

{% swagger-parameter in="body" name="content" type="string" required="true" %}
Attachment body, binary string format.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="X-Trace-Id" type="string" required="false" %}
Trace ID that shall be returned back in header when updating the malware scan state for the file. This field is not required, being used for debugging purposes only.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="X-Ping-Scan" type="boolean" required="false" %}
For diagnostic purposes only. If this header is set to true, the Malware Scanner shall not perform any scanning and just return HTTP 200 OK. This is required (mandatory) to check the connectivity between Symproxy and the Malware Scanner.
{% endswagger-parameter %}

{% swagger-response status="200: OK" description="Result" %}
```javascript
//Successfully initiated the malware scan of the given file.
```
{% endswagger-response %}

{% swagger-response status="400: Bad Request" description="Result" %}
```javascript
//Bad Request. See response body for further details.
```
{% endswagger-response %}

{% swagger-response status="429: Too Many Requests" description="Result" %}
```javascript
//Too many requests. See response body for further details.
```
{% endswagger-response %}

{% swagger-response status="500: Internal Server Error" description="Result" %}
```javascript
//Server error. See response body for further details.
```
{% endswagger-response %}
{% endswagger %}
